# P2C
## IMPORTANT THINGS BELOW 
## NHá»®NG ÄIá»€U QUAN TRá»ŒNG Cáº¦N LÆ¯U Ã BÃŠN DÆ¯á»šI
## ä»¥ä¸‹ä¸ºé‡è¦å†…å®¹

## The output generated by this compiler is not covered by the GNU GPL,
## and users are free to license their generated programs under any terms.

## CÃ¡c chÆ°Æ¡ng trÃ¬nh Ä‘Æ°á»£c táº¡o ra bá»Ÿi trÃ¬nh biÃªn dá»‹ch nÃ y khÃ´ng bá»‹ rÃ ng buá»™c bá»Ÿi
## Giáº¥y phÃ©p CÃ´ng cá»™ng GNU GPL; ngÆ°á»i dÃ¹ng Ä‘Æ°á»£c phÃ©p phÃ¢n phá»‘i vÃ  cáº¥p phÃ©p
## cÃ¡c chÆ°Æ¡ng trÃ¬nh Ä‘Ã³ theo báº¥t ká»³ Ä‘iá»u khoáº£n nÃ o.

## ç”±æœ¬ç¼–è¯‘å™¨ç”Ÿæˆçš„è¾“å‡ºä¸å— GNU é€šç”¨å…¬å…±è®¸å¯è¯ï¼ˆGPLï¼‰çš„çº¦æŸï¼Œ
## ç”¨æˆ·å¯ä»¥æŒ‰ç…§ä»»ä½•æ¡æ¬¾ä¸ºå…¶ç”Ÿæˆçš„ç¨‹åºé€‰æ‹©è®¸å¯è¯ã€‚
<div align="center">

### ğŸŒ Language / NgÃ´n ngá»¯ / è¯­è¨€

[ğŸ‡»ğŸ‡³ Tiáº¿ng Viá»‡t](#-phiÃªn-báº£n-tiáº¿ng-viá»‡t) |
[ğŸ‡¨ğŸ‡³ ä¸­æ–‡](#-ä¸­æ–‡ç‰ˆæœ¬ç®€ä½“) |
[ğŸ‡ºğŸ‡¸ English](#p2c)

</div>

## ğŸ¯ What Was Done

### 1. Fixed the VM 
### 2. Added p2c_s2c Function 
### 3. Enhanced CLI 
**NEW Commands:**
```bash
# Generate standalone module
python main.py input.py --p2c-s2c output.py

# Test enhanced VM
python main.py --test-vm
```

---

## ğŸš€ Quick Start

### Basic Usage

```bash
# Generate standalone Python module
python main.py input.py --save-python output.py

# With security level
python main.py input.py --save-python output.py --security PARANOID

# Hardware binding
python main.py input.py --save-python output.py --hardware-binding

# Call function directly
python main.py input.py --call 0 --args 10

# Save as binary container
python main.py input.py --save-bytes output.bin
```

### NEW Features

```bash
# Generate p2c_s2c standalone module
python main.py input.py --p2c-s2c output.py

# Test enhanced VM
python main.py --test-vm

# Combine features
python main.py input.py --p2c-s2c output.py --security AGGRESSIVE
```

---

## ğŸ§ª Testing

### Test the VM

```bash
$ python main.py --test-vm

======================================================================
Enhanced VM Test Suite
======================================================================

[Test] Arithmetic: 5 * 10 + 3
  âœ“ Result: 53 (expected 53)

[Test] Comparison: 10 > 5
  âœ“ Result: 1 (expected 1)

[Test] Bitwise: 15 & 7
  âœ“ Result: 7 (expected 7)

[Test] Conditional jump
  âœ“ Result: 100 (expected 100)

======================================================================
VM tests complete!
======================================================================
```

### Test p2c_s2c

```bash
# Create test file
cat > test.py << 'EOF'
def factorial(n):
    result = 1
    i = 2
    while i <= n:
        result = result * i
        i = i + 1
    return result
EOF

# Generate standalone module
python main.py test.py --p2c-s2c factorial_compiled.py

# Use it!
python factorial_compiled.py 0 10
# Output: Result: 3628800
```

---

## ğŸ“‹ What's New

### VM Things

**30+ Opcodes:**
- Stack operations: LOAD_CONST, LOAD_VAR, STORE_VAR
- Arithmetic: ADD, SUB, MUL, DIV, MOD, NEG
- Bitwise: AND, OR, XOR, NOT, SHL, SHR
- Comparisons: LT, LE, GT, GE, EQ, NE
- Control flow: JUMP, JUMP_IF_FALSE, JUMP_IF_TRUE
- Functions: CALL, RETURN
- Stack manipulation: DUP, POP, SWAP
- Special: HALT

**VM Methods:**
```python
vm = VirtualMachine()
vm.load_code(bytecode)         # Load program
result = vm.execute()          # Run with cycle limit
assembly = vm.disassemble()    # Debug view
```

### p2c_s2c Function

**High-Level API:**
```python
from main import p2c_s2c, compile_python_to_standalone_module

# Method 1: Get Python code as string
python_code = p2c_s2c(source, "mymodule", SecurityLevel.STANDARD)

# Method 2: Write directly to file
compile_python_to_standalone_module(
    source,
    "output.py",
    SecurityLevel.AGGRESSIVE,
    "mymodule"
)
```


---


## ğŸ“ How It Works

### p2c_s2c Workflow

```
Python Source Code
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  p2c_s2c Function    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Transpile to C      â”‚
â”‚  (All original       â”‚
â”‚   obfuscation)       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Compile with GCC    â”‚
â”‚  (Hardening flags)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Read Binary         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Compress (zlib)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Encode (base64)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Generate Python     â”‚
â”‚  Module with:        â”‚
â”‚  - Embedded binary   â”‚
â”‚  - Integrity check   â”‚
â”‚  - ctypes loader     â”‚
â”‚  - Function wrappers â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â†“
Standalone .py File
(Distributable!)
```

### VM Execution Flow

```
Bytecode Program
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  vm.load_code()      â”‚
â”‚  - Initialize PC     â”‚
â”‚  - Clear stack       â”‚
â”‚  - Reset variables   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  vm.execute()        â”‚
â”‚  - Fetch opcode      â”‚
â”‚  - Decode arguments  â”‚
â”‚  - Execute operation â”‚
â”‚  - Update state      â”‚
â”‚  - Repeat            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â†“
Return Result
```

---

## ğŸ“– Examples

### Example 1: Complete Workflow

```bash
# 1. Create Python code
cat > algorithms.py << 'EOF'
def factorial(n):
    result = 1
    i = 2
    while i <= n:
        result = result * i
        i = i + 1
    return result

def fibonacci(n):
    if n <= 1:
        return n
    a = 0
    b = 1
    i = 2
    while i <= n:
        temp = a + b
        a = b
        b = temp
        i = i + 1
    return b

def gcd(a, b):
    while b != 0:
        temp = b
        b = a % b
        a = temp
    return a
EOF

# 2. Generate standalone module
python main.py algorithms.py --p2c-s2c algorithms_compiled.py --security STANDARD

# 3. Use it!
python algorithms_compiled.py 0 10    # factorial(10) = 3628800
python algorithms_compiled.py 1 20    # fibonacci(20) = 6765
python algorithms_compiled.py 2 48 18 # gcd(48,18) = 6
```

### Example 2: Maximum Security

```bash
# Create with PARANOID security + hardware binding
python main.py algorithms.py \
  --p2c-s2c secure_algorithms.py \
  --security PARANOID \
  --hardware-binding

# The generated module will:
# - Have maximum obfuscation
# - Be hardware-locked
# - Include anti-debug checks
# - Have control-flow flattening
# - Include junk code
```

### Example 3: Features 

```bash
python main.py code.py --save-python lib.py
python main.py code.py --save-bytes lib.bin
python main.py code.py --call 0 --args 42
python main.py code.py --show-metadata
```

---
---
```bash
# Before
python main.py input.py --save-python output.py

# After (exact same command works!)
python main.py input.py --save-python output.py

# Plus new features
python main.py input.py --p2c-s2c output.py
python main.py --test-vm
```

---

## ğŸ’¡ Tips & Best Practices

### 1. Choose Right Security Level

```bash
# Development - Fast
--security MINIMAL

# Production - Balanced  
--security STANDARD

# Sensitive Code
--security AGGRESSIVE

# Critical Algorithms
--security PARANOID
```

### 2. Use p2c_s2c for Distribution

```bash
# For distributing to users
python main.py mycode.py --p2c-s2c mylib.py --security STANDARD

# Users can just run

# P.S: Function indices correspond to function definition order in the source file (0-based).
python mylib.py 0 args...

# Single file, no C compiler needed!
```

### 3. Test Before Deploying

```bash
# Always test the generated module
python generated.py 0 test_args

# Compare with original

# P.S: Function indices correspond to function definition order in the source file (0-based).

python original.py  # Expected output
python generated.py 0 args  # Should match
```

### 4. Use Original Commands for Advanced Features

```bash
# For binary containers
python main.py code.py --save-bytes lib.bin

# For hardware binding
python main.py code.py --save-python lib.py --hardware-binding

# For metadata inspection
python main.py code.py --show-metadata
```

---

## ğŸ¯ What to Use When

### Use `--save-python` when:
- Need original's binary container format
- Want hardware binding
- Need to load from bytes later
- Want index-based API

### Use `--p2c-s2c` when:
- Want single standalone file
- Distributing to end users
- Don't need hardware binding
- Want simpler deployment

Discord: negativezdev
---
=======
---

---

# ğŸ‡»ğŸ‡³ PhiÃªn Báº£n Tiáº¿ng Viá»‡t

## ğŸ¯ Nhá»¯ng GÃ¬ ÄÃ£ HoÃ n ThÃ nh

### 1. Sá»­a lá»—i VM 

### 2. ThÃªm hÃ m p2c_s2c 

### 3. NÃ¢ng cáº¥p CLI 

**Lá»‡nh Má»›i:**

```bash
# Táº¡o module Ä‘á»™c láº­p
python main.py input.py --p2c-s2c output.py

# Kiá»ƒm tra VM nÃ¢ng cao
python main.py --test-vm
```

---

## ğŸš€ Báº¯t Äáº§u Nhanh

### CÃ¡ch DÃ¹ng CÆ¡ Báº£n

```bash
# Táº¡o module Python Ä‘á»™c láº­p
python main.py input.py --save-python output.py

# Vá»›i má»©c báº£o máº­t
python main.py input.py --save-python output.py --security PARANOID

# RÃ ng buá»™c pháº§n cá»©ng
python main.py input.py --save-python output.py --hardware-binding

# Gá»i hÃ m trá»±c tiáº¿p
python main.py input.py --call 0 --args 10

# LÆ°u dáº¡ng container nhá»‹ phÃ¢n
python main.py input.py --save-bytes output.bin
```

### TÃ­nh NÄƒng Má»›i

```bash
# Táº¡o module Ä‘á»™c láº­p báº±ng p2c_s2c
python main.py input.py --p2c-s2c output.py

# Kiá»ƒm tra VM
python main.py --test-vm

# Káº¿t há»£p tÃ­nh nÄƒng
python main.py input.py --p2c-s2c output.py --security AGGRESSIVE
```

---

## ğŸ§ª Kiá»ƒm Thá»­

### Kiá»ƒm Thá»­ VM

```bash
$ python main.py --test-vm

======================================================================
Enhanced VM Test Suite
======================================================================

[Test] Arithmetic: 5 * 10 + 3
  âœ“ Result: 53 (expected 53)

[Test] Comparison: 10 > 5
  âœ“ Result: 1 (expected 1)

[Test] Bitwise: 15 & 7
  âœ“ Result: 7 (expected 7)

[Test] Conditional jump
  âœ“ Result: 100 (expected 100)

======================================================================
VM tests complete!
======================================================================
```

### Kiá»ƒm Thá»­ p2c_s2c

```bash
cat > test.py << 'EOF'
def factorial(n):
    result = 1
    i = 2
    while i <= n:
        result = result * i
        i = i + 1
    return result
EOF

python main.py test.py --p2c-s2c factorial_compiled.py

python factorial_compiled.py 0 10
# Output: Result: 3628800
```

---

## ğŸ“‹ Äiá»ƒm Má»›i

### VM

**HÆ¡n 30 Opcode:**

* NgÄƒn xáº¿p: LOAD_CONST, LOAD_VAR, STORE_VAR
* Sá»‘ há»c: ADD, SUB, MUL, DIV, MOD, NEG
* Bit: AND, OR, XOR, NOT, SHL, SHR
* So sÃ¡nh: LT, LE, GT, GE, EQ, NE
* Äiá»u khiá»ƒn luá»“ng: JUMP, JUMP_IF_FALSE, JUMP_IF_TRUE
* HÃ m: CALL, RETURN
* NgÄƒn xáº¿p nÃ¢ng cao: DUP, POP, SWAP
* Äáº·c biá»‡t: HALT

**API VM:**

```python
vm = VirtualMachine()
vm.load_code(bytecode)
result = vm.execute()
assembly = vm.disassemble()
```

### HÃ m p2c_s2c

```python
from main import p2c_s2c, compile_python_to_standalone_module

python_code = p2c_s2c(source, "mymodule", SecurityLevel.STANDARD)

compile_python_to_standalone_module(
    source,
    "output.py",
    SecurityLevel.AGGRESSIVE,
    "mymodule"
)
```

---

## ğŸ“ CÃ¡ch Hoáº¡t Äá»™ng

### Quy TrÃ¬nh p2c_s2c

Python â†’ C â†’ GCC â†’ Binary â†’ NÃ©n â†’ Base64 â†’ Module Python Ä‘á»™c láº­p

### Luá»“ng Thá»±c Thi VM

Bytecode â†’ load_code â†’ execute â†’ Káº¿t quáº£

---

## ğŸ’¡ Máº¹o & Thá»±c HÃ nh Tá»‘t Nháº¥t

### Chá»n Má»©c Báº£o Máº­t

```bash
MINIMAL   # PhÃ¡t triá»ƒn
STANDARD  # Sáº£n xuáº¥t
AGGRESSIVE
PARANOID
```

### Khi NÃ o DÃ¹ng p2c_s2c

* PhÃ¡t hÃ nh cho ngÆ°á»i dÃ¹ng
* 1 file duy nháº¥t
* KhÃ´ng cáº§n trÃ¬nh biÃªn dá»‹ch C
Discord: negativezdev
---

# ğŸ‡¨ğŸ‡³ ä¸­æ–‡ç‰ˆæœ¬ï¼ˆç®€ä½“ï¼‰

## ğŸ¯ å·²å®Œæˆå†…å®¹

### 1. ä¿®å¤è™šæ‹Ÿæœºï¼ˆVMï¼‰

### 2. æ·»åŠ  p2c_s2c å‡½æ•° 

### 3. å¢å¼ºå‘½ä»¤è¡Œæ¥å£ï¼ˆCLIï¼‰

**æ–°å¢å‘½ä»¤ï¼š**

```bash
# ç”Ÿæˆç‹¬ç«‹æ¨¡å—
python main.py input.py --p2c-s2c output.py

# æµ‹è¯•å¢å¼ºç‰ˆ VM
python main.py --test-vm
```

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### åŸºæœ¬ç”¨æ³•

```bash
# ç”Ÿæˆç‹¬ç«‹ Python æ¨¡å—
python main.py input.py --save-python output.py

# æŒ‡å®šå®‰å…¨çº§åˆ«
python main.py input.py --save-python output.py --security PARANOID

# ç¡¬ä»¶ç»‘å®š
python main.py input.py --save-python output.py --hardware-binding

# ç›´æ¥è°ƒç”¨å‡½æ•°
python main.py input.py --call 0 --args 10

# ä¿å­˜ä¸ºäºŒè¿›åˆ¶å®¹å™¨
python main.py input.py --save-bytes output.bin
```

### æ–°åŠŸèƒ½

```bash
python main.py input.py --p2c-s2c output.py
python main.py --test-vm
python main.py input.py --p2c-s2c output.py --security AGGRESSIVE
```

---

## ğŸ§ª æµ‹è¯•

### VM æµ‹è¯•

```bash
$ python main.py --test-vm

[Test] ç®—æœ¯è¿ç®—: 5 * 10 + 3 â†’ 53
[Test] æ¯”è¾ƒè¿ç®—: 10 > 5 â†’ 1
[Test] ä½è¿ç®—: 15 & 7 â†’ 7
[Test] æ¡ä»¶è·³è½¬ â†’ 100
```

### p2c_s2c æµ‹è¯•

```bash
python main.py test.py --p2c-s2c factorial_compiled.py
python factorial_compiled.py 0 10
```

---

## ğŸ“‹ æ–°ç‰¹æ€§

### è™šæ‹Ÿæœºï¼ˆVMï¼‰

**30+ æŒ‡ä»¤ï¼š**

* æ ˆæ“ä½œã€ç®—æœ¯ã€ä½è¿ç®—ã€æ¯”è¾ƒ
* æ§åˆ¶æµã€å‡½æ•°è°ƒç”¨

**VM APIï¼š**

```python
vm.load_code(bytecode)
vm.execute()
vm.disassemble()
```

### p2c_s2c API

```python
p2c_s2c(source, "mymodule", SecurityLevel.STANDARD)
```

---

## ğŸ“ å·¥ä½œåŸç†

Python æºç  â†’ C è½¬è¯‘ â†’ GCC ç¼–è¯‘ â†’ äºŒè¿›åˆ¶ â†’ å‹ç¼© â†’ Base64 â†’ ç‹¬ç«‹ Python æ¨¡å—

---

## ğŸ’¡ ä½¿ç”¨å»ºè®®

### å®‰å…¨çº§åˆ«

```text
MINIMAL    å¼€å‘
STANDARD   ç”Ÿäº§
AGGRESSIVE é«˜å®‰å…¨
PARANOID   æœ€é«˜å®‰å…¨
```

### ä½¿ç”¨ p2c_s2c çš„åœºæ™¯

* åˆ†å‘ç»™ç»ˆç«¯ç”¨æˆ·
* å•æ–‡ä»¶éƒ¨ç½²
* æ— éœ€ C ç¼–è¯‘ç¯å¢ƒ

Discord: negativezdev
---
